<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Serialize Objects — serialize • transltr</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Serialize Objects — serialize"><meta name="description" content="Convert Translator objects, Text objects, and
Location objects to a YAML object, or
vice-versa.
Convert translations contained by a Translator object to
a custom textual representation (a FLAT object), or
vive-versa."><meta property="og:description" content="Convert Translator objects, Text objects, and
Location objects to a YAML object, or
vice-versa.
Convert translations contained by a Translator object to
a custom textual representation (a FLAT object), or
vive-versa."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">transltr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jeanmathieupotvin/transltr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Serialize Objects</h1>
      <small class="dont-index">Source: <a href="https://github.com/jeanmathieupotvin/transltr/blob/main/R/serialize.R" class="external-link"><code>R/serialize.R</code></a></small>
      <div class="d-none name"><code>serialize.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Convert <code><a href="class-translator.html">Translator</a></code> objects, <code><a href="class-text.html">Text</a></code> objects, and
<code><a href="class-location.html">Location</a></code> objects to a <a href="https://rdrr.io/pkg/yaml/man/as.yaml.html" class="external-link">YAML</a> object, or
vice-versa.</p>
<p>Convert translations contained by a <code><a href="class-translator.html">Translator</a></code> object to
a custom textual representation (a <a href="flat.html">FLAT</a> object), or
vive-versa.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">serialize</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">serialize_translations</span><span class="op">(</span>tr <span class="op">=</span> <span class="fu"><a href="class-translator.html">translator</a></span><span class="op">(</span><span class="op">)</span>, lang <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">deserialize</span><span class="op">(</span>string <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">deserialize_translations</span><span class="op">(</span>string <span class="op">=</span> <span class="st">""</span>, tr <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">export_translations</span><span class="op">(</span>tr <span class="op">=</span> <span class="fu"><a href="class-translator.html">translator</a></span><span class="op">(</span><span class="op">)</span>, lang <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">export</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'Translator'</span></span>
<span><span class="fu">export</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'Text'</span></span>
<span><span class="fu">export</span><span class="op">(</span><span class="va">x</span>, id <span class="op">=</span> <span class="fu"><a href="uuid.html">uuid</a></span><span class="op">(</span><span class="op">)</span>, set_translations <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'Location'</span></span>
<span><span class="fu">export</span><span class="op">(</span><span class="va">x</span>, id <span class="op">=</span> <span class="fu"><a href="uuid.html">uuid</a></span><span class="op">(</span><span class="op">)</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'ExportedTranslator'</span></span>
<span><span class="fu"><a href="assert.html">assert</a></span><span class="op">(</span><span class="va">x</span>, throw_error <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'ExportedText'</span></span>
<span><span class="fu"><a href="assert.html">assert</a></span><span class="op">(</span><span class="va">x</span>, throw_error <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'ExportedLocation'</span></span>
<span><span class="fu"><a href="assert.html">assert</a></span><span class="op">(</span><span class="va">x</span>, throw_error <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'ExportedTranslations'</span></span>
<span><span class="fu"><a href="assert.html">assert</a></span><span class="op">(</span><span class="va">x</span>, throw_error <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">import</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'ExportedTranslator'</span></span>
<span><span class="fu">import</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'ExportedText'</span></span>
<span><span class="fu">import</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'ExportedLocation'</span></span>
<span><span class="fu">import</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'ExportedTranslations'</span></span>
<span><span class="fu">import</span><span class="op">(</span><span class="va">x</span>, tr <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Default S3 method</span></span>
<span><span class="fu">import</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">format_errors</span><span class="op">(</span>errors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="op">)</span>, id <span class="op">=</span> <span class="fu"><a href="uuid.html">uuid</a></span><span class="op">(</span><span class="op">)</span>, throw_error <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>Any <span style="R">R</span> object.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Further arguments passed to, or from other methods.</p></dd>


<dt id="arg-tr">tr<a class="anchor" aria-label="anchor" href="#arg-tr"></a></dt>
<dd><p>A <code><a href="class-translator.html">Translator</a></code> object.</p>
<p>This argument is <code>NULL</code> by default for <code>deserialize_translations()</code> and
<code>import.ExportedTranslations()</code>. If a <code><a href="class-translator.html">Translator</a></code> object
is passed to these functions, they will import translations and further
register them (as long as they correspond to an existing source text).</p></dd>


<dt id="arg-lang">lang<a class="anchor" aria-label="anchor" href="#arg-lang"></a></dt>
<dd><p>A non-empty and non-NA character string. The underlying language.</p>
<p>A language is usually a code (of two or three letters) for a native
language name. While users retain full control over codes, it is best
to use language codes stemming from well-known schemes such as
<a href="https://en.wikipedia.org/wiki/IETF_language_tag" class="external-link">IETF BCP 47</a>, or
<a href="https://en.wikipedia.org/wiki/List_of_ISO_639_language_codes" class="external-link">ISO 639-1</a>
to maximize portability and cross-compatibility.</p></dd>


<dt id="arg-string">string<a class="anchor" aria-label="anchor" href="#arg-string"></a></dt>
<dd><p>A non-empty and non-NA character string. Contents
to deserialize.</p></dd>


<dt id="arg-id">id<a class="anchor" aria-label="anchor" href="#arg-id"></a></dt>
<dd><p>A non-empty and non-NA character string. A unique identifier for
the underlying object. It is used for validation purposes.</p></dd>


<dt id="arg-set-translations">set_translations<a class="anchor" aria-label="anchor" href="#arg-set-translations"></a></dt>
<dd><p>A non-NA logical value. Should translations be
included in the resulting <code>ExportedText</code> object? If <code>FALSE</code>,
field <code>Translations</code> is set equal to <code>NULL</code>.</p></dd>


<dt id="arg-throw-error">throw_error<a class="anchor" aria-label="anchor" href="#arg-throw-error"></a></dt>
<dd><p>A non-NA logical value. Should an error be thrown? If so,
<code><a href="utils-stop.html">stops()</a></code> is called. Otherwise, error messages are returned as a character
vector (possibly empty).</p></dd>


<dt id="arg-errors">errors<a class="anchor" aria-label="anchor" href="#arg-errors"></a></dt>
<dd><p>A non-empty character vector of non-NA values. Error
message(s) describing why object(s) are invalid.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>See other sections for further information.</p>
<p><code>serialize()</code>, and <code>serialize_translations()</code> return a character string.</p>
<p><code>export()</code> returns a named list of S3 class</p><ul><li><p><code>ExportedTranslator</code> if <code>x</code> is a <code><a href="class-translator.html">Translator</a></code>
object,</p></li>
<li><p><code>ExportedText</code> if <code>x</code> is a <code><a href="class-text.html">Text</a></code> object, or</p></li>
<li><p><code>ExportedLocation</code> if <code>x</code> is a <code><a href="class-location.html">Location</a></code> object.</p></li>
</ul><p><code>export_translations()</code> returns an <code>ExportedTranslations</code> object.</p>
<p><code>deserialize()</code> and <code>import()</code> return</p><ul><li><p>a <code><a href="class-translator.html">Translator</a></code> object if <code>x</code> is a valid
<code>ExportedTranslator</code> object,</p></li>
<li><p>a <code><a href="class-text.html">Text</a></code> object if <code>x</code> is a valid <code>ExportedText</code>
object, or</p></li>
<li><p>a <code><a href="class-location.html">Location</a></code> object if <code>x</code> a valid
<code>ExportedLocation</code> object.</p></li>
</ul><p><code>deserialize_translations()</code> and <code>import.ExportedTranslations()</code> return an
<code>ExportedTranslations</code> object. They further register imported
translations if a <code><a href="class-translator.html">Translator</a></code> object is passed to <code>tr</code>.</p><ul><li><p>Translations must correspond to an existing source text (a registered
<code><a href="class-text.html">Text</a></code> object). Otherwise, they are skipped.</p></li>
<li><p>The value passed to <code>tr</code> is updated <strong>by reference</strong> and is not returned.</p></li>
</ul><p><code>import.default()</code> is used for its side-effect of throwing an error for
unsupported objects.</p>
<p><code>assert.ExportedTranslator()</code>,
<code>assert.ExportedText()</code>,
<code>assert.ExportedLocation()</code>, and
<code>assert.ExportedTranslations()</code> return a character vector, possibly empty.
If <code>throw_error</code> is <code>TRUE</code>, an error is thrown if an object is invalid.</p>
<p><code>format_errors()</code> returns a character vector, and outputs its contents as
an error if <code>throw_error</code> is <code>TRUE</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The information contained within a <code><a href="class-translator.html">Translator</a></code> object is
split by default. Unless <code>set_translations</code> is <code>TRUE</code>, translations are
serialized independently from other fields. This is useful when creating
Translator files and translations files.</p>
<p>While <code>serialize()</code> and <code>serialize_translations()</code> are distinct, they share
a common <em>design</em> and perform the same <em>thing</em>, at least conceptually. The
same is true for <code>deserialize()</code> and <code>deserialize_translations()</code>. These 4
functions are those that should be used in almost all circumstances.</p><div class="section">
<h3 id="serialization">Serialization<a class="anchor" aria-label="anchor" href="#serialization"></a></h3>


<p>The data serialization process performed by <code>serialize()</code> and
<code>serialize_translations()</code> is internally broken down into 2 steps: objects
are first <em>exported</em> before being <em>serialized</em>.</p>
<p><code>export()</code> and <code>export_translations()</code> are <em>preserializing mechanisms</em> that
convert objects into <em>transient</em> objects that ease the conversion process.
They are never returned to the user: <code>serialize()</code>, and
<code>serialize_translations()</code> immediately transform them into character strings.</p>
<p><code>serialize()</code> returns a <a href="https://rdrr.io/pkg/yaml/man/as.yaml.html" class="external-link">YAML object</a>.</p>
<p><code>serialize_translations()</code> returns a <a href="flat.html">FLAT object</a>.</p>
</div>

<div class="section">
<h3 id="deserialization">Deserialization<a class="anchor" aria-label="anchor" href="#deserialization"></a></h3>


<p>The data deserialization process performed by <code>deserialize()</code> and
<code>deserialize_translations()</code> is internally broken down into 3 steps: objects
are first <em>deserialized</em>, then <em>validated</em> and finally, <em>imported</em>.</p>
<p><code>deserialize()</code> and <code>deserialize_translations()</code> are
<em>raw deserializer mechanisms</em>: <code>string</code> is converted into an <span style="R">R</span> named list
that is <strong>presumed</strong> to be an <em>exported</em> object. <code>deserialize()</code> relies on
<a href="https://yaml.org/spec/1.1/#id858600" class="external-link">YAML tags</a> to infer the class of each
object.</p>
<p>The contents of the <em>transient</em> objects is thoroughly checked with an
<code><a href="assert.html">assert()</a></code> method (based on the underlying presumed class). Valid objects
are <em>imported</em> back into an appropriate <span style="R">R</span> object with <code>import()</code>.</p>
<p>Custom fields and comments added by users to serialized objects are ignored.</p>
</div>

<div class="section">
<h3 id="formatting-errors">Formatting errors<a class="anchor" aria-label="anchor" href="#formatting-errors"></a></h3>


<p><code><a href="assert.html">assert()</a></code> methods accumulate error messages before returning, or throwing
them. <code>format_errors()</code> is a helper function that eases this process. It
exists to avoid repeting code in each method. There is no reason to call
it outside of <code><a href="assert.html">assert()</a></code> methods.</p>
</div>

    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>Dividing the serialization and deserialization processes into multiple steps
helps keeping the underlying functions short, and easier to test.</p>
    </div>
    <div class="section level2">
    <h2 id="exported-objects">Exported Objects<a class="anchor" aria-label="anchor" href="#exported-objects"></a></h2>


<p>An exported object is a named list of S3 class
<code>ExportedTranslator</code>,
<code>ExportedText</code>,
<code>ExportedLocation</code>, or
<code>ExportedTranslations</code> and
always having a <code>tag</code> attribute whose value is equal to the super-class of
<code>x</code>.</p>
<p>There are four main differences between an object and its <em>exported</em>
counterpart.</p><ol><li><p>Field names are slightly more verbose.</p></li>
<li><p>Source text is treated independently from translations.</p></li>
<li><p>Unset fields are set equal to <code>NULL</code> (a <code>~</code> in YAML).</p></li>
<li><p>Each object has an <code>Identifier</code> used to locate errors.</p></li>
</ol><p>The correspondance between objects is self-explanatory.</p><ul><li><p>See class <code><a href="class-translator.html">Translator</a></code> for more information on class
<code>ExportedTranslator</code>.</p></li>
<li><p>See class <code><a href="class-text.html">Text</a></code> for more information on class
<code>ExportedText</code>.</p></li>
<li><p>See class <code><a href="class-location.html">Location</a></code> for more information on class
<code>ExportedLocation</code>.</p></li>
</ul><p>You may also explore provided examples below.</p><div class="section">
<h3 id="the-exportedtranslations-class">The <code>ExportedTranslations</code> Class<a class="anchor" aria-label="anchor" href="#the-exportedtranslations-class"></a></h3>


<p><code>ExportedTranslations</code> objects are created from a
<code><a href="class-translator.html">Translator</a></code> object with <code>export_translations()</code>. Their purpose
is to restructure translations by language. They are different from other
exported objects because there is no corresponding <code>Translations</code> class.</p>
<p>An <code>ExportedTranslations</code> object is a named list of S3 class
<code>ExportedTranslations</code> containing the following elements.</p>
<dl><dt><code>Identifier</code></dt>
<dd><p>The unique identifier of argument <code>tr</code>. See
<code><a href="class-translator.html">Translator$id</a></code> for more information.</p></dd>

<dt><code>Language Code</code></dt>
<dd><p>The value of argument <code>lang</code>.</p></dd>

<dt><code>Language</code></dt>
<dd><p>The translation's language. See
<code><a href="class-translator.html">Translator$native_languages</a></code> for more information.</p></dd>

<dt><code>Source Language</code></dt>
<dd><p>The source text's language. See
<code><a href="class-translator.html">Translator$source_langs</a></code> for more information.</p></dd>

<dt><code>Translations</code></dt>
<dd><p>A named list containing further named lists. Each
sublist contains two values:</p><dl><dt><code>Source Text</code></dt>
<dd><p>A non-empty and non-NA character string.</p></dd>

<dt><code>Translation</code></dt>
<dd><p>A non-empty and non-NA character string.</p></dd>


</dl><p>See <code><a href="class-text.html">Text$translations</a></code> for more information.</p></dd>


</dl><p>Unavailable translations are automatically replaced by a placeholder that
depends on whether they are exported or imported.</p>
</div>

    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="https://yaml.org/spec/1.1/" class="external-link">Official YAML 1.1 specification</a>,
<code><a href="https://rdrr.io/pkg/yaml/man/as.yaml.html" class="external-link">yaml::as.yaml()</a></code>,
<code><a href="https://rdrr.io/pkg/yaml/man/yaml.load.html" class="external-link">yaml::yaml.load()</a></code>,
<code><a href="flat.html">flat_serialize()</a></code>,
<code><a href="flat.html">flat_deserialize()</a></code>,
<code><a href="translator-io.html">translator_read()</a></code>,
<code><a href="translator-io.html">translator_write()</a></code>,
<code><a href="translator-io.html">translations_read()</a></code>,
<code><a href="translator-io.html">translations_write()</a></code></p></div>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jean-Mathieu Potvin, Jérôme Lavoué.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

